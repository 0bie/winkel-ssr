(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[54],{13558:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(68670),n=a(83816),c=(a(25334),a(56394),a(92070),a(5943));const l=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,r.Z)(this,e),this.cache=t,this.cacheHits=0}return(0,n.Z)(e,[{key:"getCache",value:function(){return this.cache}},{key:"getCacheHits",value:function(){return this.cacheHits}},{key:"getFromCache",value:function(e){var t=this;return Promise.resolve().then((function(){var a=(0,c.Wu)(e),r=t.cache.map((function(e){return e.key})).indexOf(a);if(r>=0)return t.cacheHits++,console.info("Cache[hit]: ".concat(e," returned from cache")),t.cache[r];console.info("Cache[miss]: ".concat(e," not found in cache"))}))}},{key:"addItemToCache",value:function(e,t){var a=this;return Promise.resolve().then((function(){var r={key:(0,c.Wu)(e),cached:t};a.cache.push(r),console.info("Cache: ".concat(e," was added to cache"))}))}},{key:"removeItemFromCache",value:function(e){var t=this;return Promise.resolve().then((function(){var a=(0,c.Wu)(e),r=t.cache.map((function(e){return e.key})).indexOf(a);r>=0?(delete t.cache[r],console.info("Cache: ".concat(e," removed from cache"))):console.info("Cache: ".concat(e," not found in cache"))}))}},{key:"clearCache",value:function(){this.cache=[]}}]),e}())},89887:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(42172),n=(a(92070),a(35466));function c(){return n.createElement("li",{className:"cardlist-item cardlist-placeholder"},n.createElement("div",{className:"cardlist-media"},n.createElement("figure",{className:"image-container"})),n.createElement("div",{className:"cardlist-content"},n.createElement("header",{className:"cardlist-header"},n.createElement("h4",{className:"cardlist-title placeholder-text"}),n.createElement("div",{className:"cardlist-meta placeholder-text"})),n.createElement("div",{className:"cardlist-footer"},n.createElement("ul",{className:"meta-list"},n.createElement("li",{className:"meta-item"},n.createElement("h4",{className:"meta-price placeholder-text"}),n.createElement("div",{className:"meta-source placeholder-text"})),n.createElement("li",{className:"meta-item"},n.createElement("h4",{className:"meta-date"},n.createElement("span",{className:"meta-duration placeholder-text"}),n.createElement("span",{className:"meta-notice placeholder-text"})))))))}function l(e){var t=e.count,a=void 0===t?4:t;return n.createElement("ul",{className:"cardlist"},(0,r.Z)(new Array(a)).map((function(e,t){return n.createElement(c,{key:t})})))}},79145:(e,t,a)=>{"use strict";a.d(t,{Z:()=>O});var r=a(94786),n=(a(92070),a(54458),a(35466)),c=a(8203),l=a(5943);function s(e){var t=e.name,a=e.image,r=e.supplier,s=e.price,i=e.quantity,o=e.units,m=e.saleBy,u=e.handler;return n.createElement("li",{className:"cardlist-item"},n.createElement("div",{className:"cardlist-media"},n.createElement("figure",{className:"image-container"},n.createElement("img",{src:a.src,alt:t}))),n.createElement("div",{className:"cardlist-content"},n.createElement("header",{className:"cardlist-header"},n.createElement("h4",{className:"cardlist-title"},t),r&&n.createElement("div",{className:"cardlist-meta"},r)),r&&n.createElement("div",{className:"cardlist-footer"},n.createElement("ul",{className:"meta-list"},n.createElement("li",{className:"meta-item"},n.createElement("h4",{className:"meta-price"},n.createElement("span",{className:"meta-value"},(0,l.uf)(s)),n.createElement("span",{className:"meta-unit"},"CAD")),n.createElement("div",{className:"meta-source"},i)),n.createElement("li",{className:"meta-item"},n.createElement("h4",{className:"meta-date"},n.createElement("span",{className:"meta-duration",title:"offer expires in ".concat((0,l.sG)({date:m}))},(0,l.sG)({date:m})),n.createElement("span",{className:"meta-notice"},o," units"))))),u&&n.createElement("div",{className:"cardlist-actions"},n.createElement(c.Z,{size:"xs",label:"request order",classNames:["btn--primary"],onClick:u}))))}var i=a(89887),o=a(54142),m=(a(20288),a(23675),a(92129),a(52004),a(28407),a(38288),a(90924)),u=a(60515),d=a(80043),p=a(84264),f=a.n(p),h=(a(85375),a(74517),a(56394),a(55677),a(24655),a(52871));function E(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,c=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw c}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function y(e,t){return N.apply(this,arguments)}function N(){return(N=(0,d.Z)(f().mark((function e(t,a){var r,n,c,s,i,o,d,p,v,y,N,b,g,O,x,Z,k,C,w,j;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),r=document.getElementById("form_order")){e.next=4;break}throw new Error("handleOrder requires a valid form element");case 4:n={},c=new FormData(r),s=E(c.entries());try{for(s.s();!(i=s.n()).done;)o=(0,m.Z)(i.value,2),d=o[0],p=o[1],"units"===d?n[d]=parseInt(p):p.length>0&&(n[d]=p)}catch(e){s.e(e)}finally{s.f()}return e.next=10,h.Z.getProducts();case 10:return v=e.sent,y=v.products,e.next=14,h.Z.getCompanies();case 14:if(N=e.sent,b=N.companies,g=y.findIndex((function(e){return e.id===n.product})),O=b.findIndex((function(e){return e.name===n.company})),x=y[g],x.id,Z=(0,u.Z)(x,["id"]),n.id||(k=b[O],C=k.id,(0,u.Z)(k,["id"])),w=Object.assign({},n,{id:n.id||C,input:{units:n.units,products:[Z],delivery:n.delivery}}),!a.target.closest(".panel-action")){e.next=28;break}if(!(0,l.uY)(w)){e.next=24;break}return e.abrupt("return");case 24:return e.next=26,h.Z.sendOrder(w);case 26:j=e.sent,(0,l.uY)(j.sendOrder)||((0,l.ip)({duration:5e3,message:"Your order has been sent.",handleNotice:t}),r.reset());case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=a(38112);function g(e){var t=e.product,a=(0,n.useContext)(b.Z).handleNoticeToggle;return n.createElement(n.Fragment,null,n.createElement("ul",{className:"card-list"},n.createElement(s,t)),n.createElement("h3",{className:"title--panel"},"sold by ",t.supplier),n.createElement("span",{className:"offer-meta"},"Offer ends in ",(0,l.sG)({date:t.saleBy})),n.createElement("form",{id:"form_order",className:"panel-form form--order"},n.createElement("input",{name:"product",value:t.id,type:"hidden"}),n.createElement("input",{name:"company",value:t.supplier,type:"hidden"}),n.createElement("div",null,n.createElement("div",{className:"panel-input mb--sm"},n.createElement("label",{className:"input-label"},"quantity"),n.createElement(o.Z,{size:"xs",name:"units",min:"0",max:"15",type:"number",classNames:["input--full"]})),n.createElement("div",{className:"panel-input mb--sm"},n.createElement("label",{className:"input-label"},"delivery method"),n.createElement("select",{name:"delivery",className:"input input--xs input--full"},n.createElement("option",{value:""},"Choose a Delivery method"),n.createElement("option",{value:"express"},"Express (1 - 2 business days)"),n.createElement("option",{value:"standard"},"Standard (5 - 8 business days)")))),n.createElement("div",{className:"panel-action"},n.createElement(c.Z,{size:"xs",label:"place order",onClick:y.bind(null,a),classNames:["btn--primary","btn--raised","btn--full"]}))))}function O(e){var t=e.items,a=e.handleOrder;return n.createElement(n.Fragment,null,function(e){if(!e||!e.length>0)return n.createElement(i.Z,{count:8})}(t),n.createElement("ul",{className:"cardlist"},t&&t.map((function(e){return n.createElement(s,(0,r.Z)({},e,{key:e.id,handler:a&&a.bind(null,{children:n.createElement(g,{product:e}),title:"Order ".concat(e.name)})}))}))))}},58781:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(35466),n=a(8203),c=a(5943);function l(e){var t=e.children,a=e.title,l=e.isOpen,s=e.handleToggle;return r.createElement("div",{className:"sidebar-container ".concat((0,c.gj)(l))},r.createElement("div",{className:"sidebar"},r.createElement("header",{className:"sidebar-header"},r.createElement("h3",{className:"sidebar-title"},a),r.createElement("div",{className:"sidebar-action"},r.createElement(n.Z,{size:"xs",classNames:["btn--link"],icon:{id:"x1",size:"sm",title:"close sidebar"},onClick:s}))),r.createElement("section",{className:"sidebar-content"},t)),r.createElement("div",{className:"sidebar-overlay"}))}},67703:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(80043),n=a(84264),c=a.n(n),l=a(35466),s=a(65695),i=(a(99751),a(52004),a(38833),a(10815),a(55090),a(79174),a(94786)),o=a(94949),m=a(90924),u=a(58781),d=a(79145);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){var t=e.products,a=(0,l.useState)({isOpen:!1}),r=(0,m.Z)(a,2),n=r[0],c=r[1],s=function(e){return c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,o.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({isOpen:!n.isOpen},e))};return l.createElement(l.Fragment,null,l.createElement("header",{className:"header--panel header--offer"},l.createElement("h3",{className:"title--panel"},"Offers")),l.createElement("div",{className:"content--offer"},l.createElement(d.Z,{items:t,handleOrder:s})),l.createElement(u.Z,(0,i.Z)({handleToggle:s},n)))}var h=a(52871),E=a(13558);function v(e){return l.createElement("div",null,l.createElement(s.q,null,l.createElement("title",null,"Winkel - Order Management - Offers"),l.createElement("meta",{property:"og:title",content:"Winkel - Order Management"})),l.createElement("div",{className:"home-content"},l.createElement(f,{products:e.products})))}v.getProps=function(){var e=(0,r.Z)(c().mark((function e(t){var a,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.request,t.response,t.params,t.location,e.next=3,E.Z.getFromCache("products");case 3:if(!(a=e.sent)){e.next=6;break}return e.abrupt("return",{products:a.cached.products});case 6:return e.next=8,h.Z.getProducts();case 8:return r=e.sent,E.Z.addItemToCache("products",r),e.abrupt("return",{products:r.products});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);